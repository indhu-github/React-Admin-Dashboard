{"ast":null,"code":"import * as React from 'react';\nimport { gridVisibleColumnDefinitionsSelector } from '../columns/gridColumnsSelector';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { gridVisibleSortedRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { useGridVisibleRows } from '../../utils/useGridVisibleRows';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { GridCellModes } from '../../../models/gridEditRowModel';\nimport { isNavigationKey } from '../../../utils/keyboardUtils';\nimport { GRID_DETAIL_PANEL_TOGGLE_FIELD } from '../../../constants/gridDetailPanelToggleField';\nimport { gridPinnedRowsSelector } from '../rows/gridRowsSelector';\nfunction enrichPageRowsWithPinnedRows(apiRef, rows) {\n  const pinnedRows = gridPinnedRowsSelector(apiRef) || {};\n  return [...(pinnedRows.top || []), ...rows, ...(pinnedRows.bottom || [])];\n}\n/**\n * @requires useGridSorting (method) - can be after\n * @requires useGridFilter (state) - can be after\n * @requires useGridColumns (state, method) - can be after\n * @requires useGridDimensions (method) - can be after\n * @requires useGridFocus (method) - can be after\n * @requires useGridScroll (method) - can be after\n * @requires useGridColumnSpanning (method) - can be after\n */\n\nexport const useGridKeyboardNavigation = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridKeyboardNavigation');\n  const initialCurrentPageRows = useGridVisibleRows(apiRef, props).rows;\n  const currentPageRows = React.useMemo(() => enrichPageRowsWithPinnedRows(apiRef, initialCurrentPageRows), [apiRef, initialCurrentPageRows]);\n  /**\n   * @param {number} colIndex Index of the column to focus\n   * @param {number} rowIndex index of the row to focus\n   * @param {string} closestColumnToUse Which closest column cell to use when the cell is spanned by `colSpan`.\n   * TODO replace with apiRef.current.unstable_moveFocusToRelativeCell()\n   */\n\n  const goToCell = React.useCallback(function (colIndex, rowId) {\n    let closestColumnToUse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'left';\n    const visibleSortedRows = gridVisibleSortedRowEntriesSelector(apiRef);\n    const nextCellColSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowId, colIndex);\n    if (nextCellColSpanInfo && nextCellColSpanInfo.spannedByColSpan) {\n      if (closestColumnToUse === 'left') {\n        colIndex = nextCellColSpanInfo.leftVisibleCellIndex;\n      } else if (closestColumnToUse === 'right') {\n        colIndex = nextCellColSpanInfo.rightVisibleCellIndex;\n      }\n    } // `scrollToIndexes` requires a rowIndex relative to all visible rows.\n    // Those rows do not include pinned rows, but pinned rows do not need scroll anyway.\n\n    const rowIndexRelativeToAllRows = visibleSortedRows.findIndex(row => row.id === rowId);\n    logger.debug(`Navigating to cell row ${rowIndexRelativeToAllRows}, col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex,\n      rowIndex: rowIndexRelativeToAllRows\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setCellFocus(rowId, field);\n  }, [apiRef, logger]);\n  const goToHeader = React.useCallback((colIndex, event) => {\n    logger.debug(`Navigating to header col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef, logger]);\n  const getRowIdFromIndex = React.useCallback(rowIndex => {\n    return currentPageRows[rowIndex].id;\n  }, [currentPageRows]);\n  const handleCellNavigationKeyDown = React.useCallback((params, event) => {\n    const dimensions = apiRef.current.getRootDimensions();\n    if (currentPageRows.length === 0 || !dimensions) {\n      return;\n    }\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const rowIndexBefore = currentPageRows.findIndex(row => row.id === params.id);\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Enter':\n        {\n          // TODO v6: Remove Enter case because `cellNavigationKeyDown` is not fired by the new editing API\n          // \"Enter\" is only triggered by the row / cell editing feature\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore + 1));\n          }\n          break;\n        }\n      case 'ArrowUp':\n        {\n          if (rowIndexBefore > firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore - 1));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n          break;\n        }\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n          break;\n        }\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore));\n          }\n          break;\n        }\n      case 'Tab':\n        {\n          // \"Tab\" is only triggered by the row / cell editing feature\n          if (event.shiftKey && colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore), 'left');\n          } else if (!event.shiftKey && colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n          break;\n        }\n      case ' ':\n        {\n          const field = params.field;\n          if (field === GRID_DETAIL_PANEL_TOGGLE_FIELD) {\n            break;\n          }\n          const colDef = params.colDef;\n          if (colDef && colDef.type === 'treeDataGroup') {\n            break;\n          }\n          if (!event.shiftKey && rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n          break;\n        }\n      case 'PageDown':\n        {\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n          break;\n        }\n      case 'PageUp':\n        {\n          // Go to the first row before going to header\n          const nextRowIndex = Math.max(rowIndexBefore - viewportPageSize, firstRowIndexInPage);\n          if (nextRowIndex !== rowIndexBefore && nextRowIndex >= firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(nextRowIndex));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n          break;\n        }\n      case 'Home':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(firstColIndex, getRowIdFromIndex(firstRowIndexInPage));\n          } else {\n            goToCell(firstColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n          break;\n        }\n      case 'End':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(lastColIndex, getRowIdFromIndex(lastRowIndexInPage));\n          } else {\n            goToCell(lastColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n          break;\n        }\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleColumnHeaderKeyDown = React.useCallback((params, event) => {\n    const headerTitleNode = event.currentTarget.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n    const isFromInsideContent = !!headerTitleNode && headerTitleNode.contains(event.target);\n    if (isFromInsideContent && params.field !== GRID_CHECKBOX_SELECTION_COL_DEF.field) {\n      // When focus is on a nested input, keyboard events have no effect to avoid conflicts with native events.\n      // There is one exception for the checkBoxHeader\n      return;\n    }\n    const dimensions = apiRef.current.getRootDimensions();\n    if (!dimensions) {\n      return;\n    }\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n    switch (event.key) {\n      case 'ArrowDown':\n        {\n          if (firstRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(firstRowIndexInPage));\n          }\n          break;\n        }\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToHeader(colIndexBefore + 1, event);\n          }\n          break;\n        }\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToHeader(colIndexBefore - 1, event);\n          }\n          break;\n        }\n      case 'PageDown':\n        {\n          if (firstRowIndexInPage !== null && lastRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(firstRowIndexInPage + viewportPageSize, lastRowIndexInPage)));\n          }\n          break;\n        }\n      case 'Home':\n        {\n          goToHeader(firstColIndex, event);\n          break;\n        }\n      case 'End':\n        {\n          goToHeader(lastColIndex, event);\n          break;\n        }\n      case 'Enter':\n        {\n          if (event.ctrlKey || event.metaKey) {\n            apiRef.current.toggleColumnMenu(params.field);\n          }\n          break;\n        }\n      case ' ':\n        {\n          // prevent Space event from scrolling\n          break;\n        }\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // Ignore portal\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    } // Get the most recent params because the cell mode may have changed by another listener\n\n    const cellParams = apiRef.current.getCellParams(params.id, params.field);\n    if (cellParams.cellMode !== GridCellModes.Edit && isNavigationKey(event.key)) {\n      apiRef.current.publishEvent('cellNavigationKeyDown', cellParams, event);\n    }\n  }, [apiRef]);\n  useGridApiEventHandler(apiRef, 'cellNavigationKeyDown', handleCellNavigationKeyDown);\n  useGridApiEventHandler(apiRef, 'columnHeaderKeyDown', handleColumnHeaderKeyDown);\n  useGridApiEventHandler(apiRef, 'cellKeyDown', handleCellKeyDown);\n};","map":{"version":3,"names":["React","gridVisibleColumnDefinitionsSelector","useGridLogger","useGridApiEventHandler","gridVisibleSortedRowEntriesSelector","useGridVisibleRows","GRID_CHECKBOX_SELECTION_COL_DEF","gridClasses","GridCellModes","isNavigationKey","GRID_DETAIL_PANEL_TOGGLE_FIELD","gridPinnedRowsSelector","enrichPageRowsWithPinnedRows","apiRef","rows","pinnedRows","top","bottom","useGridKeyboardNavigation","props","logger","initialCurrentPageRows","currentPageRows","useMemo","goToCell","useCallback","colIndex","rowId","closestColumnToUse","visibleSortedRows","nextCellColSpanInfo","current","unstable_getCellColSpanInfo","spannedByColSpan","leftVisibleCellIndex","rightVisibleCellIndex","rowIndexRelativeToAllRows","findIndex","row","id","debug","scrollToIndexes","rowIndex","field","getVisibleColumns","setCellFocus","goToHeader","event","setColumnHeaderFocus","getRowIdFromIndex","handleCellNavigationKeyDown","params","dimensions","getRootDimensions","length","viewportPageSize","unstable_getViewportPageSize","colIndexBefore","getColumnIndex","rowIndexBefore","firstRowIndexInPage","lastRowIndexInPage","firstColIndex","lastColIndex","shouldPreventDefault","key","shiftKey","colDef","type","Math","min","nextRowIndex","max","ctrlKey","metaKey","preventDefault","handleColumnHeaderKeyDown","headerTitleNode","currentTarget","querySelector","columnHeaderTitleContainerContent","isFromInsideContent","contains","target","toggleColumnMenu","handleCellKeyDown","cellParams","getCellParams","cellMode","Edit","publishEvent"],"sources":["/Users/indhuyelineni/Desktop/Projects/React-Dashboard/node_modules/@mui/x-data-grid/hooks/features/keyboardNavigation/useGridKeyboardNavigation.js"],"sourcesContent":["import * as React from 'react';\nimport { gridVisibleColumnDefinitionsSelector } from '../columns/gridColumnsSelector';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { gridVisibleSortedRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { useGridVisibleRows } from '../../utils/useGridVisibleRows';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { GridCellModes } from '../../../models/gridEditRowModel';\nimport { isNavigationKey } from '../../../utils/keyboardUtils';\nimport { GRID_DETAIL_PANEL_TOGGLE_FIELD } from '../../../constants/gridDetailPanelToggleField';\nimport { gridPinnedRowsSelector } from '../rows/gridRowsSelector';\n\nfunction enrichPageRowsWithPinnedRows(apiRef, rows) {\n  const pinnedRows = gridPinnedRowsSelector(apiRef) || {};\n  return [...(pinnedRows.top || []), ...rows, ...(pinnedRows.bottom || [])];\n}\n/**\n * @requires useGridSorting (method) - can be after\n * @requires useGridFilter (state) - can be after\n * @requires useGridColumns (state, method) - can be after\n * @requires useGridDimensions (method) - can be after\n * @requires useGridFocus (method) - can be after\n * @requires useGridScroll (method) - can be after\n * @requires useGridColumnSpanning (method) - can be after\n */\n\n\nexport const useGridKeyboardNavigation = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridKeyboardNavigation');\n  const initialCurrentPageRows = useGridVisibleRows(apiRef, props).rows;\n  const currentPageRows = React.useMemo(() => enrichPageRowsWithPinnedRows(apiRef, initialCurrentPageRows), [apiRef, initialCurrentPageRows]);\n  /**\n   * @param {number} colIndex Index of the column to focus\n   * @param {number} rowIndex index of the row to focus\n   * @param {string} closestColumnToUse Which closest column cell to use when the cell is spanned by `colSpan`.\n   * TODO replace with apiRef.current.unstable_moveFocusToRelativeCell()\n   */\n\n  const goToCell = React.useCallback((colIndex, rowId, closestColumnToUse = 'left') => {\n    const visibleSortedRows = gridVisibleSortedRowEntriesSelector(apiRef);\n    const nextCellColSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowId, colIndex);\n\n    if (nextCellColSpanInfo && nextCellColSpanInfo.spannedByColSpan) {\n      if (closestColumnToUse === 'left') {\n        colIndex = nextCellColSpanInfo.leftVisibleCellIndex;\n      } else if (closestColumnToUse === 'right') {\n        colIndex = nextCellColSpanInfo.rightVisibleCellIndex;\n      }\n    } // `scrollToIndexes` requires a rowIndex relative to all visible rows.\n    // Those rows do not include pinned rows, but pinned rows do not need scroll anyway.\n\n\n    const rowIndexRelativeToAllRows = visibleSortedRows.findIndex(row => row.id === rowId);\n    logger.debug(`Navigating to cell row ${rowIndexRelativeToAllRows}, col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex,\n      rowIndex: rowIndexRelativeToAllRows\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setCellFocus(rowId, field);\n  }, [apiRef, logger]);\n  const goToHeader = React.useCallback((colIndex, event) => {\n    logger.debug(`Navigating to header col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef, logger]);\n  const getRowIdFromIndex = React.useCallback(rowIndex => {\n    return currentPageRows[rowIndex].id;\n  }, [currentPageRows]);\n  const handleCellNavigationKeyDown = React.useCallback((params, event) => {\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (currentPageRows.length === 0 || !dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const rowIndexBefore = currentPageRows.findIndex(row => row.id === params.id);\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Enter':\n        {\n          // TODO v6: Remove Enter case because `cellNavigationKeyDown` is not fired by the new editing API\n          // \"Enter\" is only triggered by the row / cell editing feature\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore + 1));\n          }\n\n          break;\n        }\n\n      case 'ArrowUp':\n        {\n          if (rowIndexBefore > firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore - 1));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'Tab':\n        {\n          // \"Tab\" is only triggered by the row / cell editing feature\n          if (event.shiftKey && colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore), 'left');\n          } else if (!event.shiftKey && colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          const field = params.field;\n\n          if (field === GRID_DETAIL_PANEL_TOGGLE_FIELD) {\n            break;\n          }\n\n          const colDef = params.colDef;\n\n          if (colDef && colDef.type === 'treeDataGroup') {\n            break;\n          }\n\n          if (!event.shiftKey && rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageUp':\n        {\n          // Go to the first row before going to header\n          const nextRowIndex = Math.max(rowIndexBefore - viewportPageSize, firstRowIndexInPage);\n\n          if (nextRowIndex !== rowIndexBefore && nextRowIndex >= firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(nextRowIndex));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(firstColIndex, getRowIdFromIndex(firstRowIndexInPage));\n          } else {\n            goToCell(firstColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'End':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(lastColIndex, getRowIdFromIndex(lastRowIndexInPage));\n          } else {\n            goToCell(lastColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleColumnHeaderKeyDown = React.useCallback((params, event) => {\n    const headerTitleNode = event.currentTarget.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n    const isFromInsideContent = !!headerTitleNode && headerTitleNode.contains(event.target);\n\n    if (isFromInsideContent && params.field !== GRID_CHECKBOX_SELECTION_COL_DEF.field) {\n      // When focus is on a nested input, keyboard events have no effect to avoid conflicts with native events.\n      // There is one exception for the checkBoxHeader\n      return;\n    }\n\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (!dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        {\n          if (firstRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(firstRowIndexInPage));\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToHeader(colIndexBefore + 1, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToHeader(colIndexBefore - 1, event);\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (firstRowIndexInPage !== null && lastRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(firstRowIndexInPage + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          goToHeader(firstColIndex, event);\n          break;\n        }\n\n      case 'End':\n        {\n          goToHeader(lastColIndex, event);\n          break;\n        }\n\n      case 'Enter':\n        {\n          if (event.ctrlKey || event.metaKey) {\n            apiRef.current.toggleColumnMenu(params.field);\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          // prevent Space event from scrolling\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // Ignore portal\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    } // Get the most recent params because the cell mode may have changed by another listener\n\n\n    const cellParams = apiRef.current.getCellParams(params.id, params.field);\n\n    if (cellParams.cellMode !== GridCellModes.Edit && isNavigationKey(event.key)) {\n      apiRef.current.publishEvent('cellNavigationKeyDown', cellParams, event);\n    }\n  }, [apiRef]);\n  useGridApiEventHandler(apiRef, 'cellNavigationKeyDown', handleCellNavigationKeyDown);\n  useGridApiEventHandler(apiRef, 'columnHeaderKeyDown', handleColumnHeaderKeyDown);\n  useGridApiEventHandler(apiRef, 'cellKeyDown', handleCellKeyDown);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}